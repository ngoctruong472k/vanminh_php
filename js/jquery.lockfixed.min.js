!function(t,o){t.extend({lockfixed:function(o,e){if(e&&e.offset?(e.offset.bottom=parseInt(e.offset.bottom,10),e.offset.top=parseInt(e.offset.top,10)):e.offset={bottom:100,top:0},(o=t(o))&&o.offset()){var s=o.css("position"),f=parseInt(o.css("marginTop"),10),i=o.css("top"),n=o.offset().top,p=!1;(!0===e.forcemargin||navigator.userAgent.match(/\bMSIE (4|5|6)\./)||navigator.userAgent.match(/\bOS ([0-9])_/)||navigator.userAgent.match(/\bAndroid ([0-9])\./i))&&(p=!0),t(window).bind("scroll resize orientationchange load lockfixed:pageupdate",o,function(a){if(!p||!document.activeElement||"INPUT"!==document.activeElement.nodeName){var r=0,r=o.outerHeight();a=o.outerWidth();var c=t(document).height()-e.offset.bottom,d=t(window).scrollTop();"fixed"!=o.css("position")&&(n=o.offset().top,f=parseInt(o.css("marginTop"),10),i=o.css("top")),d>=n-(f?f:0)-e.offset.top?(r=c<d+r+f+e.offset.top?d+r+f+e.offset.top-c:0,p?o.css({marginTop:parseInt((f?f:0)+(d-n-r)+2*e.offset.top,10)+"px"}):o.css({position:"fixed",top:e.offset.top-r+"px",width:a+"px"})):o.css({position:s,top:i,width:a+"px",marginTop:(f?f:0)+"px"})}})}}})}(jQuery);